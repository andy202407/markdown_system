"# 🚀 系统维护手册

## 📋 快速导航
- [🖥️ 服务器信息](#服务器信息)
- [📅 定期维护](#定期维护)
- [⚡ 服务管理](#服务管理)
- [👥 用户管理](#用户管理)
- [🚨 故障排除](#故障排除)

---

## 🖥️ 服务器信息

| 服务器 | IP地址 | 服务 | 目录 | 启动顺序 |
|--------|--------|------|------|----------|
| **SERVER** | 43.155.10.32 | IM服务器、RabbitMQ | `/home/server` | 1 |
| **CMS** | 43.132.102.59 | CMS内容管理 | `/home/cms` | 2 |
| **API** | 119.28.68.249 | API服务、MinIO | `/home/api` | 3 |

### 🔑 登录信息
- **用户名**: `root`
- **密码**: ``
- **登录**: `ssh root@IP地址` → 右键粘贴密码

---

## 📅 定期维护

### 🗓️ 每月日志清理
```bash
# API服务器
ssh root@119.28.68.249
find /home/api/logs -mtime +10 -name ""*.log"" -exec rm -rf {} \;

# SERVER服务器  
ssh root@43.155.10.32
find /home/server/logs -mtime +10 -name ""*.log"" -exec rm -rf {} \;
```

### 📊 检查清单
- **每日**: 检查服务状态、查看错误日志
- **每周**: 检查磁盘空间、更新补丁
- **每月**: 清理日志文件、检查权限
- **每季度**: 安全扫描、备份测试

---

## ⚡ 服务管理

### 🎯 启动顺序
1. **SERVER** → 2. **API** → 3. **CMS** → 4. **Nginx**

### 📝 启动命令

#### SERVER服务器 (43.155.10.32)
```bash
ssh root@43.155.10.32 → 右键粘贴密码
cd /home/server && ./stop.sh && ./run.sh
cd /usr/local/rabbitmq/sbin && ./rabbitmq-server -detached
```

#### API服务器 (119.28.68.249)
```bash
ssh root@119.28.68.249 → 右键粘贴密码
cd /usr/local/minio && ./run.sh
cd /home/api && ./stop.sh && ./run.sh
```

#### CMS服务器 (43.132.102.59)
```bash
ssh root@43.132.102.59 → 右键粘贴密码
cd /home/cms && ./stop.sh && ./run.sh
```

### 🌐 Nginx管理
```bash
# 启动
/usr/local/nginx/sbin/nginx

# 重启
/usr/local/nginx/sbin/nginx -s reload

# 检查状态
ps -ef | grep nginx

# 检查配置
/usr/local/nginx/sbin/nginx -t

# 查看日志
tail -f /usr/local/nginx/logs/error.log

# 查看进程
ps -ef | grep 服务名

# 查看端口
netstat -tlnp | grep :端口号

```

### 🚀 日常快速重启
```bash
# 一键重启所有服务（按启动顺序）
# 1. SERVER服务器
ssh root@43.155.10.32  → 右键粘贴密码
cd /home/server && ./stop.sh && ./run.sh
cd /usr/local/rabbitmq/sbin && ./rabbitmq-server -detached

# 2. API服务器  
ssh root@119.28.68.249
cd /usr/local/minio && ./run.sh
cd /home/api && ./stop.sh && ./run.sh

# 3. CMS服务器
ssh root@43.132.102.59
cd /home/cms && ./stop.sh && ./run.sh

# 4. 重启Nginx（所有服务器）
/usr/local/nginx/sbin/nginx -s reload
```

---

## 👥 用户管理

### 🔐 密码信息
- **重置后默认密码**: `qmt123`
- **管理员密码**: ``

### 🛡️ VIP/管理员
- 需在管理系统添加 **IP白名单**
- 定期检查白名单有效性
- 监控异常登录

---

## 🚨 故障排除

### 🔍 常见问题

#### Nginx问题
- 参考上方 **Nginx管理** 部分的所有命令

#### 服务无法启动
```bash
netstat -tlnp | grep :端口号  # 检查端口占用
tail -f /path/to/service.log  # 查看服务日志
ls -la /path/to/service  # 检查权限
```

#### 连接问题
- 检查防火墙设置
- 验证IP白名单
- 确认网络连通性

### 📞 紧急联系
- **系统管理员**: [待填写]
- **技术支持**: [待填写]

---

*📞 如有问题，请联系系统管理员*  
*🔄 最后更新: 2024年*  
*📋 版本: v2.0*"																				